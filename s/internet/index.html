<!DOCTYPE html>
<html>
<head>
  <title>Ultraviolet Proxy</title>
</head>
<body>
  <h1>Loading...</h1>

  <!-- Load UV Core -->
  <script src="uv/uv.bundle.js"></script>
  <script src="uv/uv.config.js"></script>
<script>
  window.addEventListener('load', async () => {
    // Register the service worker
    if ('serviceWorker' in navigator) {
      await navigator.serviceWorker.register('uv/uv.sw.js', {
        scope: '/s/internet/'
      });
    }

    // Proxy the URL in the hash using Ultraviolet's built-in encoder
    const hash = window.location.hash;
    if (hash) {
      const url = decodeURIComponent(hash.slice(1));
      const encoded = __uv$config.prefix + Ultraviolet.codec.encode(url);
      window.location.replace(encoded);
    }
  });
</script>
