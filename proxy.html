<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ZXS Proxy (DevTools Enabled)</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #000;
      --tab-bg: #002200;
      --tab-inactive: #001100;
      --tab-active: #005500;
      --text: #00ff00;
      --bar: #001100;
      --border: #00ff00;
      --accent: #00ff88;
    }

    body {
      margin: 0;
      font-family: 'Share Tech Mono', monospace;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
    }

    #top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--bar);
      height: 36px;
      padding: 0 10px;
      border-bottom: 1px solid var(--border);
    }

    #tabs {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .tab {
      background: var(--tab-inactive);
      padding: 5px 12px;
      border-radius: 8px 8px 0 0;
      font-size: 14px;
      color: var(--text);
      border: 1px solid var(--border);
      border-bottom: none;
      cursor: pointer;
    }

    .tab.active {
      background: var(--tab-active);
      font-weight: bold;
      box-shadow: 0 -2px 0 var(--accent) inset;
    }

    .tab .close {
      font-weight: bold;
      color: var(--text);
      cursor: pointer;
    }

    .tab .close:hover {
      color: red;
    }

    .new-tab-btn {
      font-size: 20px;
      color: var(--accent);
      background: none;
      border: none;
      cursor: pointer;
    }

    #toolbar {
      display: flex;
      align-items: center;
      padding: 6px 10px;
      background: var(--bar);
      border-bottom: 1px solid var(--border);
      gap: 6px;
    }

    #nav-controls button {
      background: transparent;
      border: 1px solid var(--border);
      font-size: 16px;
      color: var(--accent);
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 6px;
    }

    #address {
      flex: 1;
      padding: 8px 12px;
      border: none;
      border-radius: 20px;
      font-size: 14px;
      background: #000;
      color: var(--text);
      border: 1px solid var(--border);
    }

    #viewer {
      flex: 1;
      position: relative;
      background: black;
    }

    iframe, .start-screen {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0; left: 0;
      border: none;
      display: none;
      animation: fadeZoomIn 0.3s ease forwards;
    }

    .start-screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      color: var(--text);
    }

    .start-screen li {
      background: var(--tab-inactive);
      padding: 0.7rem 1.5rem;
      border-radius: 8px;
      border: 1px solid var(--border);
      cursor: pointer;
      list-style: none;
    }

    .start-screen li:hover {
      background: var(--tab-active);
      color: var(--accent);
    }

    @keyframes fadeZoomIn {
      from { opacity: 0; transform: scale(0.95); }
      to   { opacity: 1; transform: scale(1); }
    }

    #devtools-toggle {
      margin-left: auto;
      border: 1px solid var(--border);
      padding: 4px 10px;
      border-radius: 6px;
      background: var(--tab-inactive);
      color: var(--text);
      cursor: pointer;
    }

    #devtools-panel {
      background: #001a00;
      color: var(--text);
      border-top: 1px solid var(--border);
      height: 200px;
      display: none;
    }

    #devtools-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
  </style>
</head>
<body>

  <div id="top-bar">
    <div id="tabs"></div>
    <button class="new-tab-btn" id="new-tab">+</button>
    <button id="devtools-toggle">DevTools</button>
  </div>

  <div id="toolbar">
    <div id="nav-controls">
      <button id="back">←</button>
      <button id="forward">→</button>
      <button id="reload">⟳</button>
    </div>
    <input type="text" id="address" placeholder="Search or URL...">
  </div>

  <div id="viewer">
    <div class="start-screen" id="start-screen">
      <h2>> ZXS Proxy</h2>
      <ul>
        <li onclick="quickLaunch('https://google.com')">Google</li>
        <li onclick="quickLaunch('https://youtube.com')">YouTube</li>
        <li onclick="quickLaunch('https://easyfun.gg/embed/roblox')">Roblox</li>
      </ul>
    </div>
  </div>

  <div id="devtools-panel">
    <iframe id="devtools-iframe" src=""></iframe>
  </div>

  <script>
    const tabs = document.getElementById('tabs');
    const viewer = document.getElementById('viewer');
    const addressBar = document.getElementById('address');
    const newTabBtn = document.getElementById('new-tab');
    const startScreen = document.getElementById('start-screen');
    const backBtn = document.getElementById('back');
    const forwardBtn = document.getElementById('forward');
    const reloadBtn = document.getElementById('reload');
    const devtoolsToggle = document.getElementById('devtools-toggle');
    const devtoolsPanel = document.getElementById('devtools-panel');
    const devtoolsIframe = document.getElementById('devtools-iframe');

    let currentTab = null;
    let tabCounter = 0;

    function normalizeInput(input) {
      input = input.trim();
      const hasProtocol = /^(https?|file|ftp|ws|wss):\/\//i.test(input);
      const looksLikeDomain = /^[\w-]+(\.[\w-]+)+.*$/i.test(input);
      if (!hasProtocol && looksLikeDomain) return "https://" + input;
      if (!hasProtocol) return "https://www.startpage.com/search?q=" + encodeURIComponent(input);
      return input;
    }

    function quickLaunch(url) {
      createTab(url, url);
    }

    function createTab(url, label) {
      const tabId = `tab-${++tabCounter}`;
      const tab = document.createElement('div');
      tab.className = 'tab';
      tab.id = tabId;
      tab.innerHTML = `${label} <span class="close">×</span>`;
      tabs.appendChild(tab);

      const iframe = document.createElement('iframe');
      iframe.id = `frame-${tabId}`;
      iframe.src = `/s/embed.html#${encodeURIComponent(url)}`;
      viewer.appendChild(iframe);

      tab.addEventListener('click', (e) => {
        if (e.target.classList.contains('close')) {
          removeTab(tabId);
        } else {
          switchTab(tabId);
        }
      });

      switchTab(tabId);
    }

    function switchTab(tabId) {
      viewer.querySelectorAll('iframe').forEach(f => f.style.display = 'none');
      tabs.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      const iframe = document.getElementById(`frame-${tabId}`);
      const tab = document.getElementById(tabId);
      if (iframe && tab) {
        iframe.style.display = 'block';
        tab.classList.add('active');
        currentTab = tabId;
        const hash = iframe.src.split('#')[1];
        addressBar.value = decodeURIComponent(hash || '');
        startScreen.style.display = 'none';
      }
    }

    function removeTab(tabId) {
      const tab = document.getElementById(tabId);
      const iframe = document.getElementById(`frame-${tabId}`);
      if (tab) tab.remove();
      if (iframe) iframe.remove();
      if (currentTab === tabId) {
        currentTab = null;
        startScreen.style.display = 'flex';
      }
    }

    function openBlankTab() {
      createTab('', 'New Tab');
    }

    addressBar.addEventListener('keydown', (e) => {
      if (e.key === "Enter" && currentTab) {
        const url = normalizeInput(addressBar.value);
        const iframe = document.getElementById(`frame-${currentTab}`);
        iframe.src = `/s/embed.html#${encodeURIComponent(url)}`;
      }
    });

    backBtn.onclick = () => {
      const iframe = document.getElementById(`frame-${currentTab}`);
      iframe.contentWindow.history.back();
    };

    forwardBtn.onclick = () => {
      const iframe = document.getElementById(`frame-${currentTab}`);
      iframe.contentWindow.history.forward();
    };

    reloadBtn.onclick = () => {
      const iframe = document.getElementById(`frame-${currentTab}`);
      iframe.contentWindow.location.reload();
    };

    devtoolsToggle.onclick = () => {
      if (devtoolsPanel.style.display === 'none') {
        devtoolsPanel.style.display = 'block';
        devtoolsIframe.src = 'javascript:(function()%7B(function()%7Bvar%20x%20%3D%20document.createElement("script")%3Bx.src%20%3D%20"https%3A%2F%2Fcdn.jsdelivr.net%2Fgh%2FSnowLord7%2Fdevconsole%40master%2Fmain.js"%3Bx.onload%20%3D%20alert("Loaded%20Developer%20Console!")%3Bdocument.head.appendChild(x)%3B%7D)()%7D)()';
      } else {
        devtoolsPanel.style.display = 'none';
        devtoolsIframe.src = '';
      }
    };

    newTabBtn.onclick = () => openBlankTab();

    openBlankTab();
  </script>

</body>
</html>
